Vagrant.configure('2') do |config|
  config.vm.define 'phpfpm' do |phpfpm|
    phpfpm.vm.synced_folder '.', '/vagrant', disabled: true
    phpfpm.vm.provider 'docker' do |docker|
      docker.name = '@application.name@_phpfpm'
      docker.ports = ['@scaffold.dockerphpfpm.docker.phpfpm.ports@']
      docker.build_dir = '.'
    end
  end

  config.vm.define 'nginx' do |nginx|
    nginx.vm.synced_folder '.', '/vagrant', disabled: true
    nginx.vm.provider 'docker' do |docker|
      docker.name = '@application.name@_nginx'
      docker.image = '@scaffold.dockerphpfpm.docker.nginx.image@'
      docker.ports = ['@scaffold.dockerphpfpm.docker.nginx.ports@']
      docker.volumes = ["#{ENV['PWD']}/application.conf:/etc/nginx/conf.d/application.conf", "#{ENV['PWD']}@scaffold.dockerphpfpm.docker.phpfpm.srcdir@:@scaffold.dockerphpfpm.docker.phpfpm.destdir@"]
      docker.link '@application.name@_phpfpm:@application.name@_phpfpm'
    end
  end
end
